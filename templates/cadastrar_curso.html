<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ambipar | Cadastro de Curso</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>

  <style>
    :root{
      /* Mant√©m a paleta verde j√° usada na Ambipar */
      --brand-bg:#c1f38e;              /* fundo geral j√° usado */
      --brand-primary:#a0e76d;         /* bot√µes e destaques */
      --brand-primary-strong:#8dd24a;  /* hover */
      --surface:#ffffff;
      --surface-muted:#f9f9f9;
      --border:#e2e8f0;
      --text:#1f2937;
      --text-dim:#475569;
      --sidebar:#ffffff;
      --sidebar-border:#dfe3e7;
      --shadow:0 6px 20px rgba(0,0,0,.08);
      --radius-xl:16px;
      --radius-lg:12px;
      --radius-md:10px;
      --radius-sm:8px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(180deg, var(--brand-bg) 0%, #e9ffd2 100%);
      color:var(--text);
      display:flex;
      min-height:100vh;
    }

    /* ---------- Shell (EADFlow-like) ---------- */
    .shell{
      display:grid;
      grid-template-columns: 280px 1fr;
      grid-template-rows: 72px 1fr;
      grid-template-areas:
        "sidebar topbar"
        "sidebar main";
      width:100%;
      max-width:1400px;
      margin:0 auto;
      gap:16px;
      padding:20px;
    }

    /* Sidebar */
    .sidebar{
      grid-area:sidebar;
      background:var(--sidebar);
      border:1px solid var(--sidebar-border);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:14px;
      position:sticky;
      top:20px;
      height:calc(100vh - 40px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px 12px;
      border-radius:var(--radius-lg);
      background:var(--surface-muted);
      border:1px solid var(--border);
    }
    .brand-badge{
      width:36px;height:36px;border-radius:10px;
      background:var(--brand-primary);
      display:grid;place-items:center;
      font-weight:700;color:#2b2b2b;
    }
    .brand h1{
      font-size:16px;line-height:1.1;
    }
    .brand small{
      display:block;color:var(--text-dim);font-weight:500;
    }

    .nav-section{margin-top:6px}
    .nav-title{
      font-size:12px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.08em;margin:12px 6px 8px;
    }
    .nav{
      display:flex;flex-direction:column;gap:6px;
    }
    .nav a{
      text-decoration:none;color:var(--text);
      padding:10px 12px;border-radius:10px;
      display:flex;align-items:center;gap:10px;
      border:1px solid transparent;
      transition:.2s ease;
    }
    .nav a:hover{background:var(--surface-muted);border-color:var(--border)}
    .nav a.active{
      background:var(--brand-primary);
      border-color:transparent;
      font-weight:600;
    }

    .sidebar-foot{
      margin-top:auto;
      font-size:12px;color:var(--text-dim);
      border-top:1px dashed var(--sidebar-border);
      padding-top:12px;
    }

    /* Topbar */
    .topbar{
      grid-area:topbar;
      background:var(--surface);
      border-radius:var(--radius-xl);
      border:1px solid var(--border);
      box-shadow:var(--shadow);
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 16px 12px 14px;
      gap:12px;
    }
    .breadcrumbs{
      display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-dim);
    }
    .breadcrumbs span.current{color:var(--text);font-weight:600}
    .top-actions{display:flex;gap:10px;align-items:center}

    /* Buttons */
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border:none;border-radius:10px;
      background:var(--brand-primary);color:#2b2b2b;
      font-weight:600;cursor:pointer;transition:.2s ease;
    }
    .btn:hover{background:var(--brand-primary-strong)}
    .btn.secondary{
      background:#e9ecef;color:#222;border:1px solid #dfe3e7;
    }
    .btn.secondary:hover{background:#dfe3e7}
    .btn.danger{background:#dc3545;color:#fff}
    .btn.danger:hover{background:#b02a37}
    .btn.ghost{
      background:transparent;border:1px dashed var(--border);color:var(--text);
    }
    .icon{font-weight:700;display:inline-block;width:16px;text-align:center}

    /* Main */
    .main{
      grid-area:main;
      display:grid;grid-template-columns:1fr;gap:16px;
    }

    /* Page header card */
    .page-head{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow);
      padding:18px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .page-title h2{font-size:20px}
    .page-title p{font-size:13px;color:var(--text-dim);margin-top:4px}

    /* Form card */
    .card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow);
      padding:22px;
    }
    .card h3{
      font-size:16px;margin-bottom:12px;color:var(--text);
    }
    .grid{
      display:grid;gap:14px;
    }
    .grid.cols-2{grid-template-columns:1fr 1fr}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width: 960px){
      .shell{grid-template-columns:1fr;grid-template-areas:"topbar" "main";padding:14px}
      .sidebar{display:none}
      .grid.cols-2,.grid.cols-3{grid-template-columns:1fr}
    }

    /* Fields */
    .field{display:flex;flex-direction:column;gap:6px}
    .field label{font-size:13px;color:var(--text-dim);font-weight:600}
    .field input[type="text"],
    .field input[type="date"],
    .field select,
    .field textarea,
    .field input[type="file"]{
      padding:11px 12px;border:1px solid #cbd5e1;border-radius:10px;font-size:14px;color:var(--text);
      background:#fff;outline:none;transition:border-color .2s ease, box-shadow .2s ease;
    }
    .field textarea{min-height:120px;resize:vertical}
    .field input:focus,
    .field select:focus,
    .field textarea:focus{
      border-color:#94a3b8; box-shadow:0 0 0 3px rgba(160,231,109,.25);
    }

    /* Modules */
    .section-title{
      display:flex;align-items:center;justify-content:space-between;margin-top:6px;margin-bottom:10px;
    }
    .hint{font-size:12px;color:var(--text-dim)}
    #modulos .modulo{
      background:var(--surface-muted);
      border:1px dashed #d1d5db;
      border-radius:var(--radius-lg);
      padding:14px;margin-bottom:12px;
    }
    .modulo .top-row{
      display:grid;
      grid-template-columns:1fr auto;
      gap:12px;align-items:start;
    }

    /* Exam */
    .prova-section h3{margin-bottom:8px}
    #perguntas .pergunta{
      background:var(--surface-muted);
      border:1px dashed #d1d5db;
      border-radius:var(--radius-lg);
      padding:14px;margin-bottom:10px;
    }
    .pergunta .header-pergunta{
      display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;
    }
    .pergunta label{display:block;margin-top:6px;font-size:14px;color:#222}
    .pergunta input[type="text"]{display:block;width:100%;margin-top:4px;margin-bottom:8px}
    .pergunta select{margin-top:6px}

    .form-actions{
      display:flex;gap:10px;flex-wrap:wrap;margin-top:8px
    }
  </style>
</head>

<body>
  <div class="shell">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-badge">A</div>
        <div>
          <h1>Ambipar EAD</h1>
          <small>EADFlow layout</small>
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-title">Home</div>
        <nav class="nav">
          <a href="/" class="active"><span class="icon">üè†</span>In√≠cio</a>
          <a href="/cursos"><span class="icon">üìö</span>Meus Cursos</a>
          <a href="/config"><span class="icon">‚öôÔ∏è</span>Configura√ß√µes</a>
        </nav>
      </div>

      <div class="nav-section">
        <div class="nav-title">Gest√£o</div>
        <nav class="nav">
          <a href="/cadastrar-curso"><span class="icon">‚ûï</span>Novo Curso</a>
          <a href="/alunos"><span class="icon">üë•</span>Alunos</a>
          <a href="/relatorios"><span class="icon">üìà</span>Relat√≥rios</a>
        </nav>
      </div>

      <div class="sidebar-foot">
        Voc√™ est√° na Home. Todas as configura√ß√µes ficam acess√≠veis aqui, no mesmo layout.
      </div>
    </aside>

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="breadcrumbs">
        <a href="/" class="btn ghost" style="padding:8px 10px"><span class="icon">‚Üê</span>Home</a>
        <span>‚Ä∫</span>
        <span class="current">Cadastro de Curso</span>
      </div>
      <div class="top-actions">
        <button type="button" class="btn secondary" onclick="window.location.href='/cursos'"><span class="icon">üìÑ</span>Listar Cursos</button>
        <button type="button" class="btn" onclick="document.getElementById('formCurso').requestSubmit()"><span class="icon">üíæ</span>Salvar</button>
      </div>
    </header>

    <!-- MAIN -->
    <main class="main">

      <section class="page-head">
        <div class="page-title">
          <h2>Cadastro de Curso</h2>
          <p>Defina os dados do curso, m√≥dulos (PDF) e a avalia√ß√£o ‚Äî tudo sem sair do layout da Home.</p>
        </div>
        <div class="form-actions">
          <button class="btn secondary" type="button" onclick="history.back()"><span class="icon">‚Ü©</span>Voltar</button>
          <button class="btn" type="button" onclick="document.getElementById('formCurso').reset()"><span class="icon">üßπ</span>Limpar</button>
        </div>
      </section>

      <!-- FORM CARD -->
      <section class="card">
        <form id="formCurso" method="post" enctype="multipart/form-data">
          <div class="grid cols-2">
            <div class="field">
              <label for="nome">Nome do Curso</label>
              <select id="nome" name="nome" required onchange="preencherConteudo()">
                <option value="">-- Selecione --</option>
                <option value="Doutrinamento B√°sico de Solo">Doutrinamento B√°sico de Solo</option>
                <option value="Conhecimentos Gerais">Conhecimentos Gerais</option>
                <option value="Emerg√™ncias Gerais">Emerg√™ncias Gerais</option>
                <option value="SGSO">SGSO</option>
                <option value="Transporte Aerom√©dico">Transporte Aerom√©dico</option>
                <option value="Sobreviv√™ncia na Selva">Sobreviv√™ncia na Selva</option>
                <option value="Instrutor de Voo">Instrutor de Voo</option>
                <option value="Examinador">Examinador</option>
                <option value="BELL 206-B06">BELL 206-B06</option>
                <option value="AS350 SERIES-B,BA,B2,AS50">AS350 SERIES-B,BA,B2,AS50</option>
                <option value="AS 365 SERIES (N,N1,N2)/AS65">AS 365 SERIES-N,N1,N2-AS65</option>
                <option value="AS 355 SERIES (F,F1,F2,NP)/AS55">AS 355 SERIES-F,F1,F2,NP-AS55</option>
                <option value="AS330J">AS330J</option>
                <option value="AS350B-BA">AS350B-BA</option>
                <option value="AS350B2-B3">AS350B2-B3</option>
                <option value="Arriel1 Series">Arriel1 Series</option>
                <option value="RR250-C20 Series">RR250-C20 Series</option>
                <option value="AS355 Series">AS355 Series</option>
                <option value="Treinamento Solo AS350">Treinamento Solo AS350</option>
                <option value="Treinamento Solo BH06">Treinamento Solo BH06</option>
                <option value="Treinamento Solo AS355">Treinamento Solo AS355</option>
              </select>
            </div>

            <div class="field">
              <label for="carga_horaria">Carga Hor√°ria</label>
              <input type="text" id="carga_horaria" name="carga_horaria" required />
            </div>

            <div class="field" style="grid-column: 1 / -1;">
              <label for="conteudo">Conte√∫do Program√°tico</label>
              <textarea id="conteudo" name="conteudo" required></textarea>
            </div>
          </div>

          <div class="section-title">
            <h3>M√≥dulos do Curso</h3>
            <button type="button" class="btn" onclick="adicionarModulo()"><span class="icon">‚ûï</span>Adicionar M√≥dulo</button>
          </div>
          <div id="modulos"></div>

          <div class="section-title" style="margin-top:18px">
            <h3>Avalia√ß√£o</h3>
            <span class="hint">Crie perguntas de m√∫ltipla escolha e marque a alternativa correta.</span>
          </div>
          <div id="perguntas"></div>

          <div class="form-actions" style="margin-top:16px">
            <button type="button" id="adicionarPergunta" class="btn"><span class="icon">‚úö</span>Adicionar Pergunta</button>
            <input type="submit" class="btn" value="Cadastrar Curso" />
          </div>
        </form>
      </section>
    </main>
  </div>

  <script>
    /* ====== Conte√∫dos pr√©-definidos (mantidos/compat√≠veis) ====== */
    const conteudos = {
      "Doutrinamento B√°sico de Solo": `(1) Atribui√ß√µes e responsabilidades do tripulante, conforme aplic√°vel;
(2) As apropriadas provis√µes deste regulamento;
(3) Conte√∫do do certificado e das especifica√ß√µes operativas;
(4) Apropriadas partes do manual geral da empresa do detentor de certificado;
(5) O transporte seguro de artigos perigosos por via a√©rea, em conformidade com os requisitos do RBAC N¬∞ 175;
(6) O SGSO;
(7) Seguran√ßa da avia√ß√£o civil (AVSEC);
(8) Fatores humanos e CRM`,
      "Conhecimentos Gerais": `(1) Procedimentos do detentor de certificado para libera√ß√£o e localiza√ß√£o de voos;
(2) Princ√≠pios e m√©todos para determinar peso e balanceamento e limita√ß√µes de pista para decolagem pouso;
(3) princ√≠pios e m√©todos para determinar peso e balanceamento e limita√ß√µes de pista para decolagem e pouso
(4) sistemas de controle de tr√°fego a√©reo, procedimentos e fraseologia;
(5) navega√ß√£o e uso de aux√≠lios √† navega√ß√£o, incluindo procedimentos de aproxima√ß√£o por instrumentos;
(6) procedimentos de comunica√ß√µes normais e de emerg√™ncia;
(7) familiariza√ß√£o com refer√™ncias visuais antes e durante a descida abaixo da altitude de decis√£o ou da altitude m√≠nima de descida em aproxima√ß√£o por instrumento;
(8) reconhecer e evitar condi√ß√µes atmosf√©ricas severas;
(9) livrar-se de condi√ß√µes atmosf√©ricas severas, no caso de elas serem encontradas inadvertidamente, incluindo, para avi√µes, tesouras de vento em baixa altitude;
(10) operar dentro ou perto de tempestades (incluindo melhor altitude de penetra√ß√£o), ar turbulento(inclusive turbul√™ncia de c√©u claro), gelo, granizo e outras condi√ß√µes meteorol√≥gicas potencialmente perigosas e planejamento de voo.`,
      "Emerg√™ncias Gerais": `(1) Instru√ß√µes sobre procedimentos e atribui√ß√µes em emerg√™ncias, incluindo coordena√ß√£o da tripula√ß√£o
(2) Instru√ß√£o individual sobre localiza√ß√£o, funcionamento e opera√ß√£o dos equipamentos de emerg√™ncia, incluindo:
(i) equipamentos utilizados em pousos na √°gua e em evacua√ß√£o de emerg√™ncia;
(ii) equipamentos de primeiros socorros e sua apropriada utiliza√ß√£o;e
(iii) extintores de inc√™ndio port√°teis, com √™nfase no tipo de agente extintor a ser utilizado nas diferentes classes de fogos;
(3) Instru√ß√µes sobre procedimentos em emerg√™ncia, incluindo:
(i) Descompress√£o r√°pida;
(ii) Fogo a bordo em voo e no solo e procedimentos de controle de fuma√ßa, com √™nfase no equipamento el√©trico e correspondentes disjuntores localizados no interior da aeronave;
(iii) Pouso na √°gua e evacua√ß√£o;
(iv) Enfermidades, contus√µes ou outras situa√ß√µes anormais envolvendo passageiros ou tripulantes; e
(v) Interfer√™ncia il√≠cita e outras situa√ß√µes n√£o usuais;e
(4) Revis√£o e estudo de acidentes e incidentes previamente ocorridos com o detentor de certificado, envolvendo situa√ß√µes reais de emerg√™ncia;
(5) Cada tripulante deve executar exerc√≠cios pr√°ticos como evacua√ß√£o, extin√ß√£o de fogo, uso de oxig√™nio e equipamentos de flutua√ß√£o, quando aplic√°vel.`,
      "SGSO": `(1) Princ√≠pios b√°sicos de Gerenciamento de Seguran√ßa Operacional;
(2) Filosofia, pol√≠tica e cultura de seguran√ßa operacional da AMBIPAR FLYONE;
(3) Processo de identifica√ß√£o de perigos;
(4) Processos de avalia√ß√£o e mitiga√ß√£o de riscos;
(5) Canais de comunica√ß√£o para seguran√ßa operacional, com enfoque nos RELPREV;
(6) Estudos de casos de SGSO aplicados ao contexto da organiza√ß√£o;
(7) Plano de Resposta a Emerg√™ncias;
(8) Programa de Preven√ß√£o de Subst√¢ncias Psicoativas.`,
      "Transporte Aerom√©dico": `(1) Doutrina do atendimento pr√©-hospitalar a√©reo;
(2) Pap√©is e responsabilidades da tripula√ß√£o;
(3) Biosseguran√ßa e artigos perigosos;
(4) Comunica√ß√£o e coordena√ß√£o com equipes em solo;
(5) Gerenciamento de riscos operacionais em cen√°rios aerom√©dicos;
(6) Casos pr√°ticos e li√ß√µes aprendidas.`,
      "Sobreviv√™ncia na Selva": `(1) Primeiros socorros b√°sicos (RCP, controle de hemorragias);
(2) Queimaduras, choque, fraturas, transporte improvisado;
(3) Animais pe√ßonhentos;
(4) Regras de lideran√ßa e prioridades de sobreviv√™ncia;
(5) Abrigos, fogo, √°gua e alimentos;
(6) Sinaliza√ß√£o e orienta√ß√£o na mata.`,
      "Instrutor de Voo": `(1) Fun√ß√µes e responsabilidades do instrutor;
(2) Regulamentos aplic√°veis e procedimentos do detentor de certificado;
(3) M√©todos e t√©cnicas de instru√ß√£o;
(4) Avalia√ß√£o do desempenho do aluno e a√ß√µes corretivas;
(5) Procedimentos normais, anormais e de emerg√™ncia.`,
      "Examinador": `(1) Atribui√ß√µes e responsabilidades do examinador;
(2) Regulamentos, pol√≠ticas e procedimentos aplic√°veis;
(3) M√©todos e t√©cnicas para conduzir exames;
(4) Avalia√ß√£o do desempenho e a√ß√µes corretivas;
(5) Limita√ß√µes e procedimentos operacionais aprovados.`,
      "BELL 206-B06": `(1) Descri√ß√£o geral e desempenho;
(2) Sistema motopropulsor e componentes;
(3) Sistemas principais (voo, el√©trico, hidr√°ulico);
(4) Procedimentos normais, anormais e de emerg√™ncia;
(5) Opera√ß√£o em condi√ß√µes meteorol√≥gicas adversas.`,
      "AS350 SERIES-B,BA,B2,AS50": `Conte√∫do program√°tico conforme MM e POH, incluindo limita√ß√µes, sistemas e emerg√™ncias.`,
      "AS 365 SERIES (N,N1,N2)/AS65": `Conte√∫do program√°tico conforme manuais aplic√°veis e procedimentos de emerg√™ncia.`,
      "AS 355 SERIES (F,F1,F2,NP)/AS55": `Conte√∫do program√°tico conforme manuais aplic√°veis e procedimentos de emerg√™ncia.`,
      "AS330J": `Conte√∫do program√°tico conforme documenta√ß√£o t√©cnica da aeronave.`,
      "AS350B-BA": `Conte√∫do program√°tico conforme documenta√ß√£o t√©cnica da aeronave.`,
      "AS350B2-B3": `Conte√∫do program√°tico conforme documenta√ß√£o t√©cnica da aeronave.`,
      "Arriel1 Series": `Conhecimentos do powerplant, limita√ß√µes e emerg√™ncias.`,
      "RR250-C20 Series": `Conhecimentos do powerplant, limita√ß√µes e emerg√™ncias.`,
      "AS355 Series": `Conte√∫do program√°tico conforme documenta√ß√£o t√©cnica da aeronave.`,
      "Treinamento Solo AS350": `Treinamento te√≥rico de solo espec√≠fico para AS350.`,
      "Treinamento Solo BH06": `Treinamento te√≥rico de solo espec√≠fico para BH06.`,
      "Treinamento Solo AS355": `Treinamento te√≥rico de solo espec√≠fico para AS355.`
    };

    function preencherConteudo() {
      const nome = document.getElementById('nome').value;
      document.getElementById('conteudo').value = conteudos[nome] || '';
    }

    // ----- M√≥dulos -----
    let indexModulo = 0;
    function adicionarModulo() {
      const container = document.getElementById("modulos");
      const div = document.createElement("div");
      div.classList.add("modulo");
      div.innerHTML = `
        <div class="top-row">
          <div>
            <label>T√≠tulo do M√≥dulo:</label>
            <input type="text" name="modulos[${indexModulo}][titulo]" required>
            <label style="margin-top:8px;">Arquivo (PDF):</label>
            <input type="file" name="modulos[${indexModulo}][arquivo]" accept=".pdf" required>
          </div>
          <button type="button" class="btn danger" onclick="this.closest('.modulo').remove()">Remover</button>
        </div>
      `;
      container.appendChild(div);
      indexModulo++;
    }

    // ----- Perguntas -----
    let indicePergunta = 0;
    document.getElementById('adicionarPergunta').addEventListener('click', () => {
      const container = document.getElementById('perguntas');
      const div = document.createElement('div');
      div.classList.add('pergunta');
      div.innerHTML = `
        <div class="header-pergunta">
          <strong>Pergunta ${indicePergunta + 1}</strong>
          <button type="button" class="btn danger" onclick="this.closest('.pergunta').remove()">Remover</button>
        </div>

        <label>Enunciado:</label>
        <input type="text" name="perguntas[${indicePergunta}][enunciado]" required>

        <label>a)</label>
        <input type="text" name="perguntas[${indicePergunta}][a]" required>

        <label>b)</label>
        <input type="text" name="perguntas[${indicePergunta}][b]" required>

        <label>c)</label>
        <input type="text" name="perguntas[${indicePergunta}][c]" required>

        <label>d)</label>
        <input type="text" name="perguntas[${indicePergunta}][d]" required>

        <label>Alternativa correta:</label>
        <select name="perguntas[${indicePergunta}][correta]" required>
          <option value="a">a</option>
          <option value="b">b</option>
          <option value="c">c</option>
          <option value="d">d</option>
        </select>
      `;
      container.appendChild(div);
      indicePergunta++;
    });
  </script>
</body>
</html>
